<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>评分的一半</title>
		<style>
			.empty{width: 95%;height: 28px;
			background: url(star.gif);	
			margin: 0 auto;														
			}
			.starScore{width:0px;height: 28px;
			background: url(star.gif) 0 -28px;			
			}
			#btn1{margin: 0 auto;display: block;}
			p{margin-left: 50%;}
		</style>
	</head>
	<body>
		<div class="empty">
			<div class="starScore"></div>
		</div>
		<input type="button" value="重新评分" id="btn1"/>
		<p id="myScore">0</p>
		<script>
			var empty = document.getElementsByClassName("empty")[0];
			var starScore = document.getElementsByClassName("starScore")[0];
			var iWidth = 13.5;
			var isClicked = 1;
			var reSocre = document.getElementById("btn1");
			var myScore = document.getElementById("myScore");
			//移上
			empty.onmousemove = function(eve){
				if(isClicked){
				var e = eve||event;
				starScore.style.width = getPosition(e.offsetX)+"px";
				}
			}
			//移开
			empty.onmouseout = function(){
				if(isClicked){
					starScore.style.width = "0px";
					myScore.innerHTML = "0";
				}
			}
			//点击评分
			empty.onclick = function(eve){
				if(isClicked){
					var e = eve||event;
					starScore.style.width = getPosition(e.offsetX)+"px";
					isClicked = 0;
				}
			}
			//重置评分
			reSocre.onclick = function(){
				isClicked = 1;
				starScore.style.width = "";
				myScore.innerHTML = "";
			}
			function getPosition(x){
				myScore.innerHTML = Math.ceil(x/iWidth);
				return iWidth*Math.ceil(x/iWidth);
			}
		</script>
	</body>
</html>
