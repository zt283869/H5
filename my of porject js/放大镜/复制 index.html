<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>放大镜</title>
		<style></style>
		<style>
			*{
				margin: 0;
				padding: 0;
			}
			.container{
				width: 800px;
				margin: 20px auto;
			}
			.goods{
				width: 320px;
				height: 504px;
				border: 1px solid gray;
				position: relative;
				float: left;
			}
			.goods img{
				width: 100%;
			}
			.pop{
				width: 160px;
				height: 252px;
				position: absolute;
				left: 0;
				top:0;
				background: rgba(0,0,0,0.4);
				cursor: move;
				display: none;
			}
			.bigPic{
				width: 320px;
				height: 504px;
				position: relative;
				border: 1px solid gray;
				overflow: hidden;
				float: left;
				margin-left: 50px;
				/*display: none;*/
			}
			.bigPic img{
				position: absolute;
				left: 0;
				top: 0;
			}
		</style>
	</head>
	<body>
	
	<div class="container">
			<div class="goods">
				<img src="images/zhiling1.jpg" />
				<div class="pop"></div>
			</div>
			<div class="bigPic">
				<img src="images/zhiling1.jpg" />
			</div>
		</div>
		<script src="base.js"></script>
		<script>
		var oGoods = getClass("goods")[0];
		var oPop = getClass("pop")[0];
		var oBig = getClass("bigPic")[0];
		var oBigPic = oBig.getElementsByTagName("img")[0];
		var w = 320,h = 504;
		var oW = 160,oH = 252;
		var bigW = 640,bigH = 1008;
		//
		oGoods.onmouseover = function(){
			oPop.style.display = "block";
			oBig.style.display = "block";
		}
		oGoods.onmouseout = function(){
			oPop.style.display = "none";
			oBig.style.display = "none";
		}
		oGoods.onmousemove = function(e){
		//	console.log(1);
			var evt = e||window.event;
			var l;
			if(evt.clientX - oGoods.offsetLeft<oW/2){  //左边界
				l=0;
			}else if(evt.clientX - oGoods.offsetLeft>(w-oW/2)){  // 右边界
				l = w - oW;
			}else{
				l = evt.clientX - oGoods.offsetLeft-oW/2;
			}
			
			if(evt.clientY - oGoods.offsetTop<oH/2){  //上边界
				t=0;
			}else if(evt.clientY - oGoods.offsetTop>(h-oH/2)){ //下边界
				t = h - oH;
			}else{
				t = evt.clientY - oGoods.offsetTop-oH/2;
			}
			
			console.log(l+"-"+t);
			oPop.style.left = l+"px";
			oPop.style.top = t+"px";
			
			oBigPic.style.left =  (-1)*l*bigW/w+"px";
			oBigPic.style.top =  (-1)*t*bigH/h+"px";
		}
		</script>
	</body>
</html>